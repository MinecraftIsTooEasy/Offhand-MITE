# Offhand-MITE

## 3.0.1

### 新增

* 新增背包界面 `F` 键槽位交换：鼠标指向玩家背包槽位时，按 `F` 可与副手槽直接互换物品。

### 增强

* 优化副手槽与原版自动补货系统的隔离，减少主副手槽位错位风险。
* 优化按键输入策略，换手操作改为按下沿触发，避免长按连发。
* 优化 GUI 内按键分流：打开容器界面时，`F` 键由容器逻辑处理，避免与全局换手逻辑重复触发。
* 创造背包与生存背包统一支持“悬停槽位 -> `F` 交换副手”的交互路径。

### 修复

* 修复“主手为空时，副手火把右键放置会回到主手”的问题。
* 修复“主手和副手按 `F` 交互存在明显延迟”的问题（移除 300ms 人为冷却）。
* 修复 `MixinGuiContainer` 启动崩溃：`@Shadow field mc was not located in net.minecraft.GuiContainer`。
* 修复 GUI 内按 `F` 可能引发双重换手触发的问题。


---

## 3.0.0

### 新增

* 增加副手 API 分层：`api/core`（槽位与玩家能力）与 `api/compat`（交互/渲染/同步策略）。
* 增加副手网络通信：换手请求、物品同步、动作同步、使用状态同步与取消使用。
* 增加副手 GUI 与渲染能力：HUD 槽位显示、第一人称渲染、第三人称左手持物渲染。
* 增加 `ContainerPlayer` 副手槽注入，实现容器侧副手交互入口。

### 增强

* 右键使用链路统一为 `onPlayerRightClickChecked + Packet81RightClick`，降低主副手行为分叉。
* 服务端 `handleBlockItemSwitch` 支持副手槽切换并保留合法性校验。
* 配置系统支持副手黑名单与调试日志，便于玩家与开发者排障。
* 构建依赖切换为 Maven 仓库优先，降低 `libs/` 本地依赖耦合。

### 修复

* 修复 `MixinInventoryPlayer` 构造注入点非法导致的 Mixin 启动失败。
* 修复副手物品在退出重进后丢失的问题（NBT 读取与回填）。
* 修复创造模式 HUD 不显示副手槽的问题。
* 修复创造模式背包中副手槽透明点击区域与纹理位置偏移的问题。
* 修复第三人称副手“空气持物/隐形持物”表现错误。
* 修复副手食物、药水、牛奶使用链路中的空指针与状态错乱问题。
* 修复主手弓使用时误消耗副手工具耐久的路由错误。
* 修复副手火把放置被主手工具类型错误限制的问题。
